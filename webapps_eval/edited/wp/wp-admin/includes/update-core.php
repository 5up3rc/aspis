<?php require_once('AspisMain.php'); ?><?php
global $_old_files;
$_old_files = array(array(array('wp-admin/bookmarklet.php',false),array('wp-admin/css/upload.css',false),array('wp-admin/css/upload-rtl.css',false),array('wp-admin/css/press-this-ie.css',false),array('wp-admin/css/press-this-ie-rtl.css',false),array('wp-admin/edit-form.php',false),array('wp-admin/link-import.php',false),array('wp-admin/images/box-bg-left.gif',false),array('wp-admin/images/box-bg-right.gif',false),array('wp-admin/images/box-bg.gif',false),array('wp-admin/images/box-butt-left.gif',false),array('wp-admin/images/box-butt-right.gif',false),array('wp-admin/images/box-butt.gif',false),array('wp-admin/images/box-head-left.gif',false),array('wp-admin/images/box-head-right.gif',false),array('wp-admin/images/box-head.gif',false),array('wp-admin/images/heading-bg.gif',false),array('wp-admin/images/login-bkg-bottom.gif',false),array('wp-admin/images/login-bkg-tile.gif',false),array('wp-admin/images/notice.gif',false),array('wp-admin/images/toggle.gif',false),array('wp-admin/images/comment-stalk-classic.gif',false),array('wp-admin/images/comment-stalk-fresh.gif',false),array('wp-admin/images/comment-stalk-rtl.gif',false),array('wp-admin/images/comment-pill.gif',false),array('wp-admin/images/del.png',false),array('wp-admin/images/media-button-gallery.gif',false),array('wp-admin/images/media-buttons.gif',false),array('wp-admin/images/tail.gif',false),array('wp-admin/images/gear.png',false),array('wp-admin/images/tab.png',false),array('wp-admin/images/postbox-bg.gif',false),array('wp-admin/includes/upload.php',false),array('wp-admin/js/dbx-admin-key.js',false),array('wp-admin/js/link-cat.js',false),array('wp-admin/js/forms.js',false),array('wp-admin/js/upload.js',false),array('wp-admin/js/set-post-thumbnail-handler.js',false),array('wp-admin/js/set-post-thumbnail-handler.dev.js',false),array('wp-admin/js/page.js',false),array('wp-admin/js/page.dev.js',false),array('wp-admin/js/slug.js',false),array('wp-admin/js/slug.dev.js',false),array('wp-admin/profile-update.php',false),array('wp-admin/templates.php',false),array('wp-includes/images/audio.png',false),array('wp-includes/images/css.png',false),array('wp-includes/images/default.png',false),array('wp-includes/images/doc.png',false),array('wp-includes/images/exe.png',false),array('wp-includes/images/html.png',false),array('wp-includes/images/js.png',false),array('wp-includes/images/pdf.png',false),array('wp-includes/images/swf.png',false),array('wp-includes/images/tar.png',false),array('wp-includes/images/text.png',false),array('wp-includes/images/video.png',false),array('wp-includes/images/zip.png',false),array('wp-includes/js/dbx.js',false),array('wp-includes/js/fat.js',false),array('wp-includes/js/list-manipulation.js',false),array('wp-includes/js/jquery/jquery.dimensions.min.js',false),array('wp-includes/js/tinymce/langs/en.js',false),array('wp-includes/js/tinymce/plugins/autosave/editor_plugin_src.js',false),array('wp-includes/js/tinymce/plugins/autosave/langs',false),array('wp-includes/js/tinymce/plugins/directionality/images',false),array('wp-includes/js/tinymce/plugins/directionality/langs',false),array('wp-includes/js/tinymce/plugins/inlinepopups/css',false),array('wp-includes/js/tinymce/plugins/inlinepopups/images',false),array('wp-includes/js/tinymce/plugins/inlinepopups/jscripts',false),array('wp-includes/js/tinymce/plugins/paste/images',false),array('wp-includes/js/tinymce/plugins/paste/jscripts',false),array('wp-includes/js/tinymce/plugins/paste/langs',false),array('wp-includes/js/tinymce/plugins/spellchecker/classes/HttpClient.class.php',false),array('wp-includes/js/tinymce/plugins/spellchecker/classes/TinyGoogleSpell.class.php',false),array('wp-includes/js/tinymce/plugins/spellchecker/classes/TinyPspell.class.php',false),array('wp-includes/js/tinymce/plugins/spellchecker/classes/TinyPspellShell.class.php',false),array('wp-includes/js/tinymce/plugins/spellchecker/css/spellchecker.css',false),array('wp-includes/js/tinymce/plugins/spellchecker/images',false),array('wp-includes/js/tinymce/plugins/spellchecker/langs',false),array('wp-includes/js/tinymce/plugins/spellchecker/tinyspell.php',false),array('wp-includes/js/tinymce/plugins/wordpress/images',false),array('wp-includes/js/tinymce/plugins/wordpress/langs',false),array('wp-includes/js/tinymce/plugins/wordpress/popups.css',false),array('wp-includes/js/tinymce/plugins/wordpress/wordpress.css',false),array('wp-includes/js/tinymce/plugins/wphelp',false),array('wp-includes/js/tinymce/themes/advanced/css',false),array('wp-includes/js/tinymce/themes/advanced/images',false),array('wp-includes/js/tinymce/themes/advanced/jscripts',false),array('wp-includes/js/tinymce/themes/advanced/langs',false),array('wp-includes/js/tinymce/tiny_mce_gzip.php',false),array('wp-includes/js/wp-ajax.js',false),array('wp-admin/admin-db.php',false),array('wp-admin/cat.js',false),array('wp-admin/categories.js',false),array('wp-admin/custom-fields.js',false),array('wp-admin/dbx-admin-key.js',false),array('wp-admin/edit-comments.js',false),array('wp-admin/install-rtl.css',false),array('wp-admin/install.css',false),array('wp-admin/upgrade-schema.php',false),array('wp-admin/upload-functions.php',false),array('wp-admin/upload-rtl.css',false),array('wp-admin/upload.css',false),array('wp-admin/upload.js',false),array('wp-admin/users.js',false),array('wp-admin/widgets-rtl.css',false),array('wp-admin/widgets.css',false),array('wp-admin/xfn.js',false),array('wp-includes/js/tinymce/license.html',false),array('wp-admin/cat-js.php',false),array('wp-admin/edit-form-ajax-cat.php',false),array('wp-admin/execute-pings.php',false),array('wp-admin/import/b2.php',false),array('wp-admin/import/btt.php',false),array('wp-admin/import/jkw.php',false),array('wp-admin/inline-uploading.php',false),array('wp-admin/link-categories.php',false),array('wp-admin/list-manipulation.js',false),array('wp-admin/list-manipulation.php',false),array('wp-includes/comment-functions.php',false),array('wp-includes/feed-functions.php',false),array('wp-includes/functions-compat.php',false),array('wp-includes/functions-formatting.php',false),array('wp-includes/functions-post.php',false),array('wp-includes/js/dbx-key.js',false),array('wp-includes/js/tinymce/plugins/autosave/langs/cs.js',false),array('wp-includes/js/tinymce/plugins/autosave/langs/sv.js',false),array('wp-includes/js/tinymce/themes/advanced/editor_template_src.js',false),array('wp-includes/links.php',false),array('wp-includes/pluggable-functions.php',false),array('wp-includes/template-functions-author.php',false),array('wp-includes/template-functions-category.php',false),array('wp-includes/template-functions-general.php',false),array('wp-includes/template-functions-links.php',false),array('wp-includes/template-functions-post.php',false),array('wp-includes/wp-l10n.php',false),array('wp-admin/import-b2.php',false),array('wp-admin/import-blogger.php',false),array('wp-admin/import-greymatter.php',false),array('wp-admin/import-livejournal.php',false),array('wp-admin/import-mt.php',false),array('wp-admin/import-rss.php',false),array('wp-admin/import-textpattern.php',false),array('wp-admin/quicktags.js',false),array('wp-images/fade-butt.png',false),array('wp-images/get-firefox.png',false),array('wp-images/header-shadow.png',false),array('wp-images/smilies',false),array('wp-images/wp-small.png',false),array('wp-images/wpminilogo.png',false),array('wp.php',false),array('wp-includes/gettext.php',false),array('wp-includes/streams.php',false)),false);
function update_core ( $from,$to ) {
global $wp_filesystem,$_old_files,$wpdb;
@array(set_time_limit(300),false);
$php_version = array(phpversion(),false);
$mysql_version = $wpdb[0]->db_version();
$required_php_version = array('4.3',false);
$required_mysql_version = array('4.1.2',false);
$wp_version = array('2.9.2',false);
$php_compat = array(version_compare(deAspisRC($php_version),deAspisRC($required_php_version),'>='),false);
$mysql_compat = array((version_compare(deAspisRC($mysql_version),deAspisRC($required_mysql_version),'>=')) || file_exists((deconcat12(WP_CONTENT_DIR,'/db.php'))),false);
if ( ((denot_boolean($mysql_compat)) || (denot_boolean($php_compat))))
 $wp_filesystem[0]->delete($from,array(true,false));
if ( ((denot_boolean($mysql_compat)) && (denot_boolean($php_compat))))
 return array(new WP_Error(array('php_mysql_not_compatible',false),Aspis_sprintf(__(array('The update cannot be installed because WordPress %1$s requires PHP version %2$s or higher and MySQL version %3$s or higher. You are running PHP version %4$s and MySQL version %5$s.',false)),$wp_version,$required_php_version,$required_mysql_version,$php_version,$mysql_version)),false);
elseif ( (denot_boolean($php_compat)))
 return array(new WP_Error(array('php_not_compatible',false),Aspis_sprintf(__(array('The update cannot be installed because WordPress %1$s requires PHP version %2$s or higher. You are running version %3$s.',false)),$wp_version,$required_php_version,$php_version)),false);
elseif ( (denot_boolean($mysql_compat)))
 return array(new WP_Error(array('mysql_not_compatible',false),Aspis_sprintf(__(array('The update cannot be installed because WordPress %1$s requires MySQL version %2$s or higher. You are running version %3$s.',false)),$wp_version,$required_mysql_version,$mysql_version)),false);
apply_filters(array('update_feedback',false),__(array('Verifying the unpacked files',false)));
if ( (((denot_boolean($wp_filesystem[0]->exists(concat2($from,'/wordpress/wp-settings.php')))) || (denot_boolean($wp_filesystem[0]->exists(concat2($from,'/wordpress/wp-admin/admin.php'))))) || (denot_boolean($wp_filesystem[0]->exists(concat2($from,'/wordpress/wp-includes/functions.php'))))))
 {$wp_filesystem[0]->delete($from,array(true,false));
return array(new WP_Error(array('insane_distro',false),__(array('The update could not be unpacked',false))),false);
}apply_filters(array('update_feedback',false),__(array('Installing the latest version',false)));
$maintenance_string = concat2(concat1('<?php $upgrading = ',attAspis(time())),'; ?>');
$maintenance_file = concat2($to,'.maintenance');
$wp_filesystem[0]->delete($maintenance_file);
$wp_filesystem[0]->put_contents($maintenance_file,$maintenance_string,array(FS_CHMOD_FILE,false));
$result = copy_dir(concat2($from,'/wordpress'),$to);
if ( deAspis(is_wp_error($result)))
 {$wp_filesystem[0]->delete($maintenance_file);
$wp_filesystem[0]->delete($from,array(true,false));
return $result;
}foreach ( $_old_files[0] as $old_file  )
{$old_file = concat($to,$old_file);
if ( (denot_boolean($wp_filesystem[0]->exists($old_file))))
 continue ;
$wp_filesystem[0]->delete($old_file,array(true,false));
}apply_filters(array('update_feedback',false),__(array('Upgrading database',false)));
$db_upgrade_url = admin_url(array('upgrade.php?step=upgrade_db',false));
wp_remote_post($db_upgrade_url,array(array('timeout' => array(60,false,false)),false));
$wp_filesystem[0]->delete($from,array(true,false));
if ( function_exists(('delete_transient')))
 delete_transient(array('update_core',false));
else 
{delete_option(array('update_core',false));
}$wp_filesystem[0]->delete($maintenance_file);
 }
;
?>
<?php 